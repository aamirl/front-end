AWS.config.update({accessKeyId:"AKIAIZYV5W77V235JRWQ",secretAccessKey:"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"}),AWS.config.region="us-west-1";var bucket=new AWS.S3({params:{Bucket:"sellyx-ecom"}}),ROOT_CURRENCIES;$.getJSON("assets/js/currencies.json",function(e){ROOT_CURRENCIES=e});var KEY_GLO,SELLER_PATH,USER_PATH,resizeImgList=[],canvas=document.createElement("canvas"),ROOT_CONFIG_PATH="https://ec.sellyx.com/";String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){var a=new RegExp(e,"g");return this.replace(a,t)},String.prototype.nl2br=function(){return this.replace(/\n/g,"<br />")},Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},$(document).on("ready",function(){$(".nav-tabs.main a:first").tab("show"),$(document).on("hide.bs.modal",".modal",function(){$(".modal-backdrop").remove(),$("body").removeClass("modal-open")}).ajaxError(function(e,t,a,n){alertify.alert("There was a server error. Please wait a few minutes before trying again. If this message keeps appearing, please contact Sellyx.")}).on("click",".logout-button",function(){$.post("/common/handle/logout",function(e){location.reload()})}).on("click",".panel-heading",function(){$(this).siblings(".panel-body").slideToggle();var e=$(this).find(".fa");e.hasClass("fa-caret-up")?e.removeClass("fa-caret-up").addClass("fa-caret-down"):e.addClass("fa-caret-up").removeClass("fa-caret-down")}).on("click",".change-status-button",function(e){if(e.stopImmediatePropagation(),$(this).parents(".child-row").length>0)var t=Sellyx.row.data($(this).parents(".child-row").parents("tr").prev("tr")),a=!0;else var t=Sellyx.row.data($(this)),a=!1;var n={url:ROOT_CONFIG_PATH+($(this).data("path")||"")+($(this).data("method")?$(this).data("method"):"status"),data:"&id="+t.data.id+"&status="+$(this).data("status")+($(this).data("extra")?"&extra="+$(this).data("extra"):""),button:$(this),update:{row:t.row},success:function(e){}};$(this).data("remove")?n.update.remove=!0:$(this).data("merge")?n.update.merge=!0:$(this).data("target")&&(n.update.target=$(this).data("target")),n.update.child=a,console.log(n),Sellyx.ajax.standard(n)}).on("click",".sellyx-minus",function(e){e.stopImmediatePropagation(),$(this).next(".sellyx-subpanel").slideToggle()}).on("click",".sellyx-left",function(){var e=$(this).parent(".sellyx-panel").width(),t=$(this).siblings(".sellyx-subpanel-scroll-a"),a=t.scrollLeft();t.animate({scrollLeft:a-e},400)}).on("click",".sellyx-right",function(){var e=$(this).parent(".sellyx-panel").width(),t=$(this).siblings(".sellyx-subpanel-scroll-a"),a=t.scrollLeft();t.animate({scrollLeft:a+e},400)}).on("click",".toggle-read-more",function(e){e.stopImmediatePropagation();var t=$(this).prev("article");t.hasClass("hidden-content")?(t.removeClass("hidden-content").addClass("shown-content"),$(this).text("Close")):(t.removeClass("shown-content").addClass("hidden-content"),$(this).text("Read More"+($(this).data("extra")?" "+$(this).data("extra"):"")))}).on("click",".see-more-div",function(e){e.stopImmediatePropagation();var t=$(this).next("div"),a=$(this).html();"none"==t.css("display")?(t.slideDown(),$(this).text(a.replace("See","Hide"))):(t.slideUp(),$(this).text(a.replace("Hide","See")))}).on("keydown",".data-number , .data-decimal",function(e){if($(this).hasClass("data-number"))var t=[46,8,9,27,13,110];else var t=[46,8,9,27,13,110,190];-1!==$.inArray(e.keyCode,t)||65==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&(e.preventDefault(),0==$(document).find(".alertify-notifier").children().length&&$.gritter.add({title:"Error",text:"Numbers only.",image:"https://sellyx-ecom.s3-us-west-1.amazonaws.com/Failure.png",sticky:!1,time:"2500",class_name:""}))}).on("click",".refresh-button",function(){var e=$(this);if(e.addClass("disabled").attr("disabled",!0),$(this).parents(".tab-pane.active").length>0)var t=$(this).parents(".tab-pane.active").find(".dataTable:last").attr("id");else var t=$(this).parents("#content").find(".dataTable:last").attr("id");$("#"+t).DataTable().ajax.reload(function(){e.removeClass("disabled").attr("disabled",!1)})}).on("focusout",".input-error",function(){$(this).hasClass("email")?Sellyx.check.email($(this).val(),!1)?$(this).removeClass("input-error"):null:$(this).hasClass("password")?Sellyx.check.password($(this).val(),!1)?$(this).removeClass("input-error"):null:$(this).hasClass("select2-selection")?""!=$(this).parents(".select2").prev("select").val()?$(this).removeClass("input-error"):null:""!=$(this).val()?$(this).removeClass("input-error"):null}).on("keyup",".enter",function(e){13==e.keyCode&&$(this).parents(".enter-container").find(".enter-target").trigger("click")}).on("dblclick",".select-group",function(){var e=$(this).find("option:selected"),t=$(this).parents(".select-group-parent").find(".select-group").not($(this));1==e.length&&(t.append(e[0].outerHTML),$(this).find("option:selected").remove())}).on("change",".other-value",function(){"other"==$(this).val()?$('<input type="text" class="form-control validate" style="margin-top:5px;" />').insertAfter($(this)):$(this).siblings().remove()}).on("change","#sort_review_select",function(e){e.stopImmediatePropagation(),Sellyx.ajax.standard({url:Sellyx.path.variable()+"home/reviews",data:"&id="+$(this).data("id")+"&type="+$(this).val()+($(this).data("target")?"&target="+$(this).data("target"):""),success:function(e){$(".reviews-div").html(e.append)}})}).on("click",".vote-button",function(e){e.stopImmediatePropagation();var t=$(this).parents(".review-box");Sellyx.ajax.standard({url:Sellyx.path.variable()+"home/l_vote",button:$(this),data:"&id="+$(this).data("id")+"&type="+$(this).data("vote")+"&review="+t.data("review")+($(this).data("target")?"&target="+$(this).data("target"):""),success:function(e){t.find('.vote-button[data-vote="2"]').next("span").text(e.up),t.find('.vote-button[data-vote="1"]').next("span").text(e.down)}})}).on("click",".delete-review-button",function(e){e.stopImmediatePropagation();var t=$(this).parents(".review-box");Sellyx.ajax.standard({url:Sellyx.path.variable()+"home/l_delete_review",button:$(this),data:"&id="+$(this).data("id")+"&review="+t.data("review")+($(this).data("target")?"&target="+$(this).data("target"):""),success:function(e){t.slideUp(300,function(){t.remove()})}})}).on("click",".fan-button",function(e){e.stopImmediatePropagation();var t=$(this).data("fan"),a=$(this).data("id"),n=$(this);return t&&a?void Sellyx.ajax.standard({url:Sellyx.path.variable()+"home/l_fan",button:n,data:"&id="+a+"&type="+t,success:function(e){if(n.text(e.text).data("fan",e.type),2==e.type){var t=$('.fan-box[data-user="'+e.user+'"]');t.slideUp(300,function(){t.remove()})}else $("#fans").find(".fan-box").length>0&&$("#fans .row").append(e.append)}}):!1})});var Sellyx={factory:"function"==typeof SFactory?SFactory():null,a:{seller:function(e){return'<a href="https://www.sellyx.com/seller/'+e.id+'">'+e.name+"</a>"},user:function(e){return'<a href="https://www.sellyx.com/user/'+e.id+'">'+e.name+"</a>"}},validate:function(e){var t=!0;if(e instanceof jQuery)var a=e;else var a=e.containers;var n=e.target||"input:text.validate, input:password.validate, textarea.validate, select.validate",i=e.message||!0;return a.find(n).each(function(){$(this).hasClass("password")&&!Sellyx.check.password($(this).val(),!0)?(t?t=!1:null,$(this).addClass("input-error")):$(this).hasClass("email")&&!Sellyx.check.email($(this).val(),!0)?(t?t=!1:null,$(this).addClass("input-error")):$(this).is("input, textarea")&&""==$(this).val()?(t?t=!1:null,$(this).addClass("input-error")):$(this).is("select")&&$(this).hasClass("select2-hidden-accessible")&&(""==$(this).val()||null==$(this).val()||0==$(this).val())?(t?t=!1:null,$(this).next("span").find(".select2-selection").addClass("input-error")):!$(this).is("select")||$(this).hasClass("other-value")||$(this).hasClass("not-empty")||null!=$(this).val()&&0!=$(this).val()?0==$(this).val()&&(t?t=!1:null,$(this).addClass("input-error")):(t?t=!1:null,$(this).addClass("input-error"))}),!t&&i?alertify.error("Please fill in all required fields."):null,t},touch:{is:function(){return"ontouchstart"in window||window.navigator.msMaxTouchPoints}},helpers:{overflown:function(e){return e=e.get(0),e.scrollWidth>e.clientWidth}},trigger:{handles:function(e){Sellyx.touch.is()?($(".sellyx-right, .sellyx-left").hide(),$(".sellyx-subpanel-scroll-a").css("overflow-x","auto")):$(document).find($(".sellyx-subpanel-scroll-a")).each(function(){var e=$(this).siblings(".sellyx-right, .sellyx-left");Sellyx.helpers.overflown($(this))?e.show():e.hide()})}},controls:{select:{toggle:function(e){var t=e.self,a=e.go,n=e.div?e.div:t.parents(".form-horizontal"),i=e.target?e.target:".type-hide",s=e.toggle?n.find(".form-group"):n.find(i);-1!=$.inArray(t.val(),a)?(s.show().find(".form-control").addClass("send"),s.find(".form-control:not(.nr)").addClass("validate"),e.toggle?n.show():null):(s.hide().find(".form-control").removeClass("send validate input-error"),e.toggle?n.hide():null)},input:function(e){var t=e.target;t.next("input").remove(),-1!=$.inArray(t.val(),e.go)&&$('<input type="text" placeholder="'+(e.placeholder?e.placeholder:"")+'" class="form-control validate '+(e.classes?e.classes:"")+' " />').insertAfter(t)}}},check:{password:function(e,t){var a=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,16}$/,n=a.test(e);return!n&&t&&alertify.alert("Please make sure your password satisfies the following conditions: <ul><li>Has at least one uppercase letter</li><li>Has at least one number</li><li>Is at least 7 characters long</li><li>Is less than 16 characters long</li></ul>"),n},email:function(e,t){var a=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i),n=a.test(e);return!n&&t&&alertify.error("Not a valid email address"),n}},ajax:{button:{set:function(e,t){e.text("").append('<div style="text-align:center;"><i class="fa fa-spinner fa-spin" style="width:100%;display:inline-block;"></i><span> '+t+"</span></div>"),e.attr("disabled",!0)},reset:function(e,t){e.children().remove().end().append(t),e.attr("disabled",!1)}},process:function(e,t,a){if(e.success){if(e.alert&&alertify[e.alert](e.success),e.reload)return void window.location.reload();t()}else if("boolean"==typeof e.failure)a&&a();else if(e.failure.msg&&300==e.failure.code)alertify.alert(e.failure.msg);else if(e.failure instanceof Object||e.failure.data){if(e.failure.data)var n="<span>"+e.failure.message+"</span><br><br>",i=e.failure.data;else var n="<span>The following fields need to be checked: </span><br><br>",i=e.failure;$.each(i,function(t,a){if(e.failure.context)var i=$("#"+e.failure.context.id).find($(".form-control["+e.failure.context.attr+"="+a+"]"));else var i=$("#"+a);if("checkbox"==i.prop("type"))var s=i.parents(".form-group").find("label").text();else var s=i.parents(".form-group").find(".control-label").text();""!=s.trim()?(n+='<p style="font-weight:bold;">'+s,n+=void 0!=i.attr("placeholder")?" - "+i.attr("placeholder")+"</p>":"</p>"):n+='<p style="font-weight:bold;">'+a+"</p>"}),alertify.alert(n),a&&a(e.failure)}else alertify.alert(e.failure),a&&a(e.failure)},standard:function(e){var t=function(e){var t=e.data?e.data:"",a=!1;if(e.container){var n=e.container instanceof jQuery?e.container:e.container.divs;if(!Sellyx.validate(n))return!1;e.json||e.container.json?t+="&send=":null;var i=e.container instanceof jQuery?Sellyx.values.get({divs:e.container,json:e.json}):Sellyx.values.get(e.container);t+=i instanceof Object?JSON.stringify(i):i;var s=n.find(".modal-content");s.length>0?a=n:null}if(e.modal&&!a&&(a=e.modal),e.button)var l=e.button.html();$.ajax({url:-1!==e.url.search("/")?e.url:Sellyx.path.ajax()+e.url,data:t,type:"post",beforeSend:function(t){if(null==Sellyx.getCookie("sellyxtoken")){var i=window.location.hash.substr(1);window.location.href="https://auth.sellyx.com/login?service=ecommerce&redirection="+i}else t.setRequestHeader("key",Sellyx.getCookie("sellyxtoken").replaceAll('"',"")),t.setRequestHeader("entity",Sellyx.getCookie("entity").replaceAll('"',"")),t.setRequestHeader("currency",Sellyx.getCookie("currency").replaceAll('"',"")),t.setRequestHeader("standard",Sellyx.getCookie("standard").replaceAll('"',""));if(e.block){var s=e.lang&&e.lang.message?e.lang.message:"Submitting...";e.block instanceof jQuery?e.block.block({message:s}):e.block instanceof Object?(s=e.lang&&e.lang.message?e.lang.message:e.block.message?e.block.message:"Submitting...","window"==e.block.target?$.blockUI({message:s}):e.block.target.block({message:s})):"window"==e.block&&$.blockUI({message:s})}else e.lang&&e.lang.message?a?n.block({message:e.lang.message}):e.container instanceof jQuery?e.container.block({message:e.lang.message}):e.container.divs.block({message:e.lang.message}):e.button?Sellyx.ajax.button.set(e.button,""):null;e.before&&e.before()}}).always(function(){e.block?e.block instanceof jQuery?e.block.unblock():e.block instanceof Object?"window"==e.block.target?$.unblockUI():e.block.target.unblock():"window"==e.block&&$.unblockUI():e.lang&&e.lang.message?a?n.unblock():e.container instanceof jQuery?e.container.unblock():e.container.divs.unblock():e.button?Sellyx.ajax.button.reset(e.button,l):null,e.always&&e.always()}).done(function(t){Sellyx.ajax.process(t,function(){e.success&&e.success(t.success),a&&(e.erase?a[0].innerHTML="":Sellyx.reset(a),e.dont_hide||a.modal("hide")),e.update&&Sellyx.row.update({row:e.update.row?e.update.row:e.button.closest("tr"),data:t.success,target:e.update.target?e.update.target:!1,merge:e.update.merge?e.update.merge:!1,child:e.update.child?e.update.child:!1,table:e.update.table?e.update.table:!1,remove:e.update.remove?e.update.remove:!1}),e.add&&Sellyx.row.add({data:t.success,table:e.add.table}),e.reload&&e.reload.DataTable().ajax.reload(),e.lang&&e.lang.success?alertify.success(e.lang.success):"string"==typeof t.success&&alertify.success(t.success)},e.failure?e.failure:null)}).fail(function(){return e.fail?void e.fail():void(e.failure&&e.failure())})};e.lang&&e.lang.confirm?alertify.confirm(e.lang.confirm,function(a){a&&t(e)}):t(e)},more:function(e){function t(t){clearTimeout(a),a=setTimeout(function(){n.scrollTop()+n.height()>i.height()-20&&e.action()},e.time)}var a=null,n=$(window),i=$(document);n.off("scroll",t).on("scroll",t)}},getCookie:function(e){var t=new RegExp(e+"=([^;]+)"),a=t.exec(document.cookie);return null!=a?JSON.parse(JSON.stringify(unescape(a[1]))):null},reset:function(e){if(e instanceof jQuery)var t=e;else var t=e.containers;t.find(".form-control:not(.avoid)").each(function(){$(this).removeClass("input-error"),$(this).prop("disabled",!1),$(this).is("input")||$(this).is("textarea")?$(this).val("").trigger("change"):$(this).is("select")&&0==$(this).prop("multiple")?$(this).val($(this).find("option:first").attr("value")).trigger("change"):$(this).is("select")&&1==$(this).prop("multiple")?$(this).find("option:selected").prop("selected",!1).trigger("change"):($(this).is("checkbox")||$(this).is("radio"))&&$(this).prop("checked",!1)})},row:{data:function(e){"object"!=typeof e&&(e=$(e));try{var t=e.parents("table").attr("id"),a=$("#"+t).DataTable(),n=e.parents(".child-row").length>0?e.parents(".child-row").parents("tr").prev("tr"):e.closest("tr");return{row:n,dtrow:a.row(n),tId:t,table:a,data:a.row(n).data()}}catch(i){console.log(i)}},add:function(e){e.table.DataTable().row.add(e.data).draw()},update:function(e){var t=e.row,a=e.data.data?e.data.data:e.data,n=e.table?e.table:t.parents("table").attr("id"),i=$("#"+n).DataTable(),s=e.merge?e.merge:!1;if(console.log(e),e.remove)return void i.row(t).remove().draw();if(e.child&&i.row(t).child.hide(),s&&(a=Sellyx.utility.merge(i.row(t).data(),a)),e.target){var l=i.row(t).data();l[e.target]=a,a=l}i.row(t).data(a).draw(),e.child&&t.click()},remove:function(e){e.event.stopImmediatePropagation();var t=Sellyx.row.data(e.button);alertify.confirm(e.lang.confirm,function(a){a&&$.ajax({data:e.data,url:e.url,type:"post",beforeSend:function(){t.row.block({message:e.lang.message})}}).done(function(a){a.success?e.reload?t.table.ajax.reload():t.table.row(t.row).remove().draw():alertify.alert(a.failure)}).always(function(){t.row.unblock()})})}},images:{colorbox:{set:function(e){var t=e.small?e.small:!1,a=e.randomize?Math.floor(1e9*Math.random()):"",n="";return $.each(e.data,function(e,i){n+='<a href="https://sellyx-ecom.s3-us-west-1.amazonaws.com/l_'+i+'" class="colorbox-productImage'+a+'" title="Image '+(e+1)+'">'+(t?'<img src="https://sellyx-ecom.s3-us-west-1.amazonaws.com/s_'+i+'" />':"")+"</a>"}),e.remove&&$.colorbox.remove(),e.container?(e.container.children().remove().end().append(n),void $(".colorbox-productImage"+a).colorbox({rel:"colorbox-productImage"+a,transition:"none",width:"75%",height:"75%"})):{str:n,num:a}},activate:function(e){$(".colorbox-productImage"+e).colorbox({rel:"colorbox-productImage"+e,transition:"none",width:"75%",height:"75%"})}},remove:function(e,t,a){a.existing?(e.sellyx_deleted_list?null:e.sellyx_deleted_list=[],e.sellyx_deleted_list.push(e[a.name].name)):0!=a.accepted&&Object.keys(e).length>0&&($.ajax({url:t+"/removeTempImage",data:"&deleteFile="+e[a.name].name,type:"post"}),delete e[a.name])},clear:function(e){e.dz.files=[],e.html.find(".dz-preview").remove()},set:function(e){var t=e.images,a=e.target.html,n=e.target.dz,i=e.files?e.files:window[a[0].id];return a.find(".dz-preview").remove(),n.files=[],i={},t?($.each(t,function(e,t){"object"==typeof t&&(t=t.image);var a={name:t,existing:!0,accepted:"true",status:"success",size:"0"};n.options.addedfile.call(n,a),n.options.thumbnail.call(n,a,"https://sellyx-ecom.s3-us-west-1.amazonaws.com/s_"+t+"?AWSAccessKeyId=AKIAIZYV5W77V235JRWQ"),i[name]={name:"https://sellyx-ecom.s3-us-west-1.amazonaws.com/s_"+t+"?AWSAccessKeyId=AKIAIZYV5W77V235JRWQ",existing:!0},n.files.push(a)}),i):i},get:function(e){var t=e.list?e.list:e,a=e.json?e.json:!1,n={"new":[]};return $.each(t,function(e,t){"sellyx_deleted_list"==e?n.deleted=t:t.existing||n["new"].push(t.name)}),n["new"].length>0||n.deleted?a?n:"&images="+JSON.stringify(n):a?{}:""}},values:{get:function(e){if(e.validate&&!Sellyx.validate(e.divs))return!1;var t=e instanceof jQuery?e:e.divs,a=e.match||".send",n=e.json?e.json:!1,i=n?{}:"",s=e.html||"id",l={};if(t.find(a).each(function(e,t){if($(this).is("select")&&$(this).hasClass("other-value")&&"other"==$(this).val())var a=$(this).next("input").val();else if($(this).is("select")&&$(this).hasClass("jsonify")){if(0==$(this).val())return;var a={value:$(this).val()};$(this).next("input").length>0&&(a.extra=$(this).next("input").val()),n?null:a=JSON.stringify(a)}else if("checkbox"==$(this).prop("type"))if($(this).is(":checked"))var a=2;else var a=1;else var a=$(this).val();var e=$(this).attr(s);if(void 0!=e)if(-1!=e.indexOf(".")){var r=e.split(".");l[r[0]]?null:l[r[0]]={},l[r[0]][r[1]]=a}else n?i[e]=a:i+="&"+e+"="+encodeURIComponent(a)}),Object.keys(l).length>0){if(n)return $.extend(i,l);$.each(l,function(e,t){i+="&"+e+"="+JSON.stringify(t)})}return i},set:function(e){var t=e.data,a=e.divs,n=e.locked?e.locked:!1,i=e.match?e.match:".send",s=e.html?e.html:"id";try{a.find(i).each(function(e,a){$(this).hasClass("input-error")?$(this).removeClass("input-error"):null,$this=$(this);var i,l=$(this).attr(s);if(l){if(-1!==l.indexOf(".")){var r=l.split(".");if(t[r[0]])var o=t[r[0]][r[1]];else var o=""}else var o=t[l];if(null!=o&&void 0!=o?(o.id&&o.label?o=o.id:o.data&&(o=o.data),i=decodeURIComponent(o.toString())):i="",$(this).hasClass("select2-container")||$(this).hasClass("select2-offscreen"));else if($(this).is("select")&&$(this).attr("multiple")){$this.find("option").prop("selected",!1);var c=i.split(",");$.each(c,function(e,t){if($this.hasClass("select-group")){var a=$this.siblings(".select-group");a.find('option[value="'+t+'"]').prop("selected",!0).trigger("dblclick")}else $this.find('option[value="'+t+'"]').prop("selected",!0)})}else if($(this).is("select")&&$(this).hasClass("other-value"))$(this).nextAll("input").remove(),0==$(this).find('option[value="'+i+'"]').length?($(this).val("other").trigger("change"),$(this).next("input").val(i)):$(this).val($(this).find("option:first").attr("value")).trigger("change");else if($(this).is("select")&&$(this).hasClass("jsonify"))o&&o.value.id?($(this).val(o.value.id).trigger("change"),o.extra&&$(this).next("input").val(o.extra.id)):$(this).val($(this).find("option:first").attr("value")).trigger("change");else if($(this).is("textarea"))i=i.replace(/<(?:.|\n)*?>/gm,""),$(this).val(i).trigger("keyup");else if("checkbox"==$(this).prop("type"))$(this).hasClass("op")?"2"==i||"off"==i||""==i?$(this).prop("checked",!1):$(this).prop("checked",!0):"1"==i||"off"==i||""==i?$(this).prop("checked",!1):$(this).prop("checked",!0),$(this).trigger("change");else if($(this).is("input"))i=i.replace(/<(?:.|\n)*?>/gm,""),$(this).hasClass("data-decimal")||$(this).hasClass("data-number")?i=i.replace(/[a-zA-Z ]+/,""):null,$(this).val(i).trigger("focusin").trigger("focusout");else if($(this).is("select")&&$(this).hasClass("ng-valid")){var d=angular.element($(this)).scope();d.$apply(function(e){d.selectValue=i})}else""==i?i=$(this).find("option:first").attr("value"):null,$(this).val(i).trigger("change");"boolean"==typeof n?$(this).prop("disabled",n):new RegExp(n).test(l)?$(this).prop("disabled",!0):$(this).prop("disabled",!1)}})}catch(l){console.log(l),alert(l)}}},path:{ajax:function(){return window.location.pathname+"/"},"static":function(){return window.location.pathname},variable:function(){var e=window.location.pathname.split("/");return e.splice(e.length-1,1),e.join("/")+"/"},reload:function(e){e||window.location.reload()},redirect:{now:function(e){e.path&&window.location.assign(e.path)}},parameters:function(e){if(!e)var t={};for(var a=window.location.search.substring(1),n=a.split("&"),i=0;i<n.length;i++){var s=n[i].split("=");if(e){if(s[0]==e)return s[1]}else t[s[0]]=s[1]}return e?!1:t},reset:function(e){var t=e&&e.path?e.path:window.location.pathname;window.history.replaceState({},"",t)}},generate:{options:function(e){var t="";return $.each(e.data,function(e,a){t+='<option value="'+e+'">'+a.name+"</option>"}),t}},overflow:function(e){var t=e.text||e,a=e.extra||!1;return'<article class="hidden-content">'+t+'</article><a class="toggle-read-more" '+(a?'data-extra="'+a+'"':"")+">Read More "+(a?" "+a:"")+"</a>"},dt:{init:function(e){var t={language:{search:"",loadingRecords:s_lang.tables.loading,processing:s_lang.tables.process,infoEmpty:s_lang.tables.empty,searchPlaceholder:s_lang.tables.search,lengthMenu:"_MENU_",info:"_START_-_END_ of _TOTAL_ ",infoEmpty:"No results"},deferRender:!0,processing:!0,stateDuration:-1,stateSave:!0,dom:'T<"clear">Rlfrtip'};"boolean"!=typeof e.ajax&&(e.ajax instanceof Object?e.ajax.path?t.ajax={dataSrc:e.ajax.dataSrc,url:Sellyx.path.ajax()+e.ajax.path}:t.ajax=e.ajax:t.ajax={url:Sellyx.path.ajax()+e.ajax},t.ajax.dataSrc?null:t.ajax.dataSrc="",t.ajax.type="POST",delete e.ajax),e.parent&&(t.drawCallback=function(t){var a=this.api(),n=a.rows().nodes(),i=null,s=a.rows()[0];a.column(e.parent.target).data().each(function(t,l){i!=t&&($(n).eq(l).before(e.parent.row(a.row(s[l]).data())),i=t)})});var a=$.extend(t,e);return a.ajax.data&&"function"!=typeof a.ajax.data&&(a.ajax.data?null:a.ajax.data={},a.ajax.data.y=1e3),a},actions:function(e){var t='<div class="btn-group"> <button onclick="angular.element(this).scope().stopPropagation(event)" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">'+(e.icon?e.icon:e.id&&e.go?'<i class="fa fa-fw fa-lg '+(-1==$.inArray(e.id,e.go)?e.id&&e.pending&&-1!==$.inArray(e.id,e.pending)?"fa-calendar s-blue":"fa-ban text-danger":"fa-check s-green")+'"></i>':"")+e.status+' <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu">';return $.each(e.buttons,function(e,a){t+="divider"==a?'<li class="divider"></li>':"<li>"+a+"</li>"}),t+="</ul></div>"},order:{parent:function(e){e.event.stopImmediatePropagation();var t=e.table.DataTable().order()[0];t[0]==e.target&&"asc"==t[1]?e.table.DataTable().order([e.target,"desc"]).draw():e.table.DataTable().order([e.target,"asc"]).draw()}},child:function(e){var t=e.all;if(t.dtrow.child.isShown())t.dtrow.child.hide(),t.row.find("."+(e.control?e.control:"child")+"-details-control").addClass("fa-plus-circle").removeClass("fa-minus-circle"),t.row.removeClass("row-opened");else{t.row.addClass("row-opened");var a='<div class="child-row row" style="padding:10px;">';a+=e.table?'<table class="child-table table"  '+(e.table.no_width?'style="width:auto;"':"")+' cellpadding="5" cellspacing="0" border="0"><tbody>'+e.ins+"</tbody></table>":e.ins,a+="</div>",t.row.find("."+(e.control?e.control:"child")+"-details-control").removeClass("fa-plus-circle").addClass("fa-minus-circle"),t.dtrow.child(a).show(),angular.element(t.row.next("tr")).injector().invoke(function(e){var a=angular.element(t.row.next("tr")),n=a.scope();e(a)(n)})}}},dz:{ammar:function(e){return $.extend({url:"http://google.com",method:"POST",headers:{key:Sellyx.getCookie("sellyxtoken").replaceAll('"',"")},maxFilesize:6,addRemoveLinks:!0,autoProcessQueue:!1,uploadMultiple:!0,parallelUploads:4,maxFiles:4,acceptedFiles:"image/jpeg, image/bmp, image/gif, image/png",accept:function(e,t){var a=e.name,n=this.element.id;void 0===window[n][a]?t():(t("not happening"),alertify.error("You already added this file!"),this.removeFile(e))},init:function(){this.on("sending",function(t,a,n){var i=Sellyx.dz.makeId()+".jpg";window[e.array].push(i),Sellyx.dz.resizeImg(t,150,150,i),Sellyx.dz.resizeImg(t,400,400,i),Sellyx.dz.resizeImg(t,900,900,i)}),this.on("removedfile",function(e){})}},e)},makeId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;14>a;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},resizeImg:function(e,t,a,n){var i={};t>400?i.name="l_"+n:t>200?i.name="m_"+n:i.name="s_"+n;var s=new FileReader;s.onload=function(n){var s=new Image;s.onload=function(){var n=s.width,l=s.height,r=1,o=1;n>t&&(r=t/n),l>a&&(o=a/l);var c=Math.min(r,o);n=Math.floor(n*c),l=Math.floor(l*c),canvas.width=n,canvas.height=l;var d=canvas.getContext("2d",{preserveDrawingBuffer:!0});d.drawImage(s,0,0,n,l);for(var u=canvas.toDataURL("image/jpeg",.5),h=u.split(",")[1],p=atob(h),f=[],g=0;g<p.length;g++)f.push(p.charCodeAt(g));var m=new Blob([new Uint8Array(f)],{type:"image/jpeg"});resizeImgList.push(m);var v={Key:i.name,ContentType:e.type,Body:m,ACL:"public-read"};bucket.upload(v,function(e,t){results.innerHTML=e?"ERROR!":"UPLOADED."})},s.src=n.target.result},s.readAsDataURL(e)},init:function(e){e=$.extend({},e);var t=e.url||Sellyx.path["static"]();return delete e.url,$.extend({url:t+"/upload",method:"post",maxFilesize:3,addRemoveLinks:!0,autoProcessQueue:!0,maxFiles:6,acceptedFiles:"image/jpeg, image/bmp, image/gif, image/png",accept:function(e,t){var a=e.name,n=this.element.id;void 0===window[n][a]?t():(t("not happening"),alertify.error("You already added this file!"),this.removeFile(e))},init:function(){var e=(document.createElement("canvas"),this.element.id);this.on("success",function(t,a){window[e][t.name]={name:a.success,existing:!1},$(".dz-success").on("click",function(){$(this).addClass("image-primary").siblings().removeClass("image-primary")})}).on("removedfile",function(a){Sellyx.images.remove(window[e],t,a)})}},e)}},"static":{buttons:{message:'<button class="btn square-button btn-d-yellow message-user-button" title="Message Seller"><i class="fa fa-envelope"></i></button>'}},utility:{object:{clone:function(e){return JSON.parse(JSON.stringify(e))},values:{get:function(e,t){if(void 0==t)return e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var a=t.split(".");a.length;){var n=a.shift();if(!(n in e))return;e=e[n]}return e}}},merge:function(e,t){var a={};for(var n in e)a[n]=e[n];for(var n in t)a[n]=t[n];return a},array:{find:{object:function(e,t,a,n,i){for(var s=0;s<e.length;s++){var l=i?e[s][i][t]:e[s][t];if(l==a)return n?{object:e[s],index:s}:e[s]}return!1},objects:function(e,t,a,n){for(var i=[],s=0;s<e.length;s++)e[s][t]==a&&(n?i.push({object:e[s],index:[s]}):i.push(e[s]));return i.length>0?i:!1}}}},dtime:{datetime:function(e){var t=e instanceof jQuery?e:e.target;t.datetimepicker({minDate:new Date,showClear:!0,sideBySide:!0,keepOpen:!0,widgetPositioning:{horizontal:"auto",vertical:"top"},useStrict:!0})},date:function(){}},vars:{},location:{currentLocation:function(e){var t={};return t}}};